generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["linux-musl"]
}

datasource db {
  provider = "postgresql"
  url      = "postgresql://postgres:kxPQgs_35Qq@db:5432/crud?schema=public"
}

model User {
  uid      String    @id() @db.Uuid @unique() @default(uuid())
  email    String    @unique() @db.VarChar(100)
  password String    @db.VarChar(100)
  nickname String    @unique() @db.VarChar(30)
  Tags     Tag[]
  UserTag  UserTag[]

  @@map("user")
}

model Tag {
  id        Int       @db.SmallInt @id() @unique() @default(autoincrement())
  User      User      @relation(fields: [userId], references: [uid])
  userId    String    @db.Uuid
  name      String    @db.VarChar(40) @unique()
  sortOrder Int       @db.SmallInt @default(0)
  UserTag   UserTag[]

  @@map("tag")
}

model UserTag {
  id     Int    @id() @unique() @default(autoincrement()) @db.SmallInt
  User   User   @relation(fields: [userId], references: [uid])
  userId String @db.Uuid
  Tags   Tag    @relation(fields: [tagId], references: [id])
  tagId  Int    @db.SmallInt

  @@map("user_tag")
}
